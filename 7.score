{"Document":{"ObjectName":"Scenario::ScenarioDocumentModel","id":1,"BaseScenario":{"ObjectName":"Scenario::BaseScenario","id":0,"Constraint":{"ObjectName":"Scenario::IntervalModel","id":0,"Metadata":{"ScriptingName":"7","Comment":"","Color":"Transparent1","Label":"","Touched":true},"Inlet":{"uuid":"a1574bb0-cbd4-4c7d-9417-0c25cfd1187b","ObjectName":"Inlet","id":0,"Hidden":false,"Custom":"Audio in","Exposed":"audio in"},"Outlet":{"uuid":"a1d97535-18ac-444a-8417-0cbc1692d897","ObjectName":"Outlet","id":0,"Hidden":false,"Custom":"Audio out","Exposed":"audio out","GainInlet":{"uuid":"9a13fb32-269a-47bf-99a9-930188c1f19c","ObjectName":"Inlet","id":10000,"Hidden":false,"Custom":"Gain","Exposed":"gain","Value":{},"Domain":{"Float":{"Min":0.0,"Max":1.0}}},"PanInlet":{"uuid":"9a13fb32-269a-47bf-99a9-930188c1f19c","ObjectName":"Inlet","id":10001,"Hidden":false,"Custom":"Pan","Exposed":"pan","Value":{},"Domain":{}},"Gain":1.0,"Pan":[1.0,1.0],"Propagate":true},"Processes":[{"uuid":"74ca45ff-92c9-44a0-8f1a-754dea05ee1b","ObjectName":"gfxProcess","id":2,"Metadata":{"ScriptingName":"Basic Shape","Comment":"","Color":"Transparent1","Label":"","Touched":true},"Duration":10584000000,"Height":300.0,"StartOffset":0,"LoopDuration":10584000000,"Pos":[-57.89999999999998,72.61000000000001],"Size":[243.59375,345.0],"Loops":false,"Vertex":"","Fragment":"/*{\n    \"CATEGORIES\": [\n        \"Geometry\"\n    ],\n    \"CREDIT\": \"by VIDVOX\",\n    \"INPUTS\": [\n        {\n            \"DEFAULT\": [\n                1,\n                1,\n                1,\n                1\n            ],\n            \"NAME\": \"color\",\n            \"TYPE\": \"color\"\n        },\n        {\n            \"DEFAULT\": 1,\n            \"LABEL\": \"Mask Shape Mode\",\n            \"LABELS\": [\n                \"Rectangle\",\n                \"Triangle\",\n                \"Circle\",\n                \"Diamond\"\n            ],\n            \"NAME\": \"maskShapeMode\",\n            \"TYPE\": \"long\",\n            \"VALUES\": [\n                0,\n                1,\n                2,\n                3\n            ]\n        },\n        {\n            \"DEFAULT\": 0.5,\n            \"LABEL\": \"Shape Width\",\n            \"MAX\": 2,\n            \"MIN\": 0,\n            \"NAME\": \"shapeWidth\",\n            \"TYPE\": \"float\"\n        },\n        {\n            \"DEFAULT\": 0.5,\n            \"LABEL\": \"Shape Height\",\n            \"MAX\": 2,\n            \"MIN\": 0,\n            \"NAME\": \"shapeHeight\",\n            \"TYPE\": \"float\"\n        },\n        {\n            \"DEFAULT\": [\n                0.5,\n                0.5\n            ],\n            \"MAX\": [\n                1,\n                1\n            ],\n            \"MIN\": [\n                0,\n                0\n            ],\n            \"NAME\": \"center\",\n            \"TYPE\": \"point2D\"\n        },\n        {\n            \"DEFAULT\": false,\n            \"LABEL\": \"Invert Mask\",\n            \"NAME\": \"invertMask\",\n            \"TYPE\": \"bool\"\n        },\n        {\n            \"DEFAULT\": 1,\n            \"LABEL\": \"Horizontal Repeat\",\n            \"LABELS\": [\n                \"1\",\n                \"2\",\n                \"3\",\n                \"4\",\n                \"5\",\n                \"6\",\n                \"7\",\n                \"8\",\n                \"9\"\n            ],\n            \"NAME\": \"horizontalRepeat\",\n            \"TYPE\": \"long\",\n            \"VALUES\": [\n                1,\n                2,\n                3,\n                4,\n                5,\n                6,\n                7,\n                8,\n                9\n            ]\n        },\n        {\n            \"DEFAULT\": 1,\n            \"LABEL\": \"Vertical Repeat\",\n            \"LABELS\": [\n                \"1\",\n                \"2\",\n                \"3\",\n                \"4\",\n                \"5\",\n                \"6\",\n                \"7\",\n                \"8\",\n                \"9\"\n            ],\n            \"NAME\": \"verticalRepeat\",\n            \"TYPE\": \"long\",\n            \"VALUES\": [\n                1,\n                2,\n                3,\n                4,\n                5,\n                6,\n                7,\n                8,\n                9\n            ]\n        }\n    ],\n    \"ISFVSN\": \"2\"\n}\n*/\n\n\n\nconst float pi = 3.14159265359;\n\n\nvec2 rotatePoint(vec2 pt, float angle, vec2 inCenter)\n{\n\tvec2 returnMe;\n\tfloat s = sin(angle * pi);\n\tfloat c = cos(angle * pi);\n\n\treturnMe = pt;\n\n\t// translate point back to origin:\n\treturnMe.x -= inCenter.x;\n\treturnMe.y -= inCenter.y;\n\n\t// rotate point\n\tfloat xnew = returnMe.x * c - returnMe.y * s;\n\tfloat ynew = returnMe.x * s + returnMe.y * c;\n\n\t// translate point back:\n\treturnMe.x = xnew + inCenter.x;\n\treturnMe.y = ynew + inCenter.y;\n\treturn returnMe;\n}\n\nfloat sign(vec2 p1, vec2 p2, vec2 p3)\n{\n\treturn (p1.x - p3.x) * (p2.y - p3.y) - (p2.x - p3.x) * (p1.y - p3.y);\n}\n\nbool PointInTriangle(vec2 pt, vec2 v1, vec2 v2, vec2 v3)\n{\n\tbool b1, b2, b3;\n\n\tb1 = sign(pt, v1, v2) < 0.0;\n\tb2 = sign(pt, v2, v3) < 0.0;\n\tb3 = sign(pt, v3, v1) < 0.0;\n\n\treturn ((b1 == b2) && (b2 == b3));\n}\n\nbool RotatedPointInTriangle(vec2 pt, vec2 v1, vec2 v2, vec2 v3, vec2 inCenter)\n{\n\tbool b1, b2, b3;\n\t\n\tvec2 v1r = v1;\n\tvec2 v2r = v2;\n\tvec2 v3r = v3;\n\n\tb1 = sign(pt, v1r, v2r) < 0.0;\n\tb2 = sign(pt, v2r, v3r) < 0.0;\n\tb3 = sign(pt, v3r, v1r) < 0.0;\n\n\treturn ((b1 == b2) && (b2 == b3));\n}\n\n\nfloat isPointInShape(vec2 pt, int shape, vec4 shapeCoordinates)\t{\n\tfloat returnMe = 0.0;\n\t\n\t//\trectangle\n\tif (shape == 0)\t{\n\t\tif (RotatedPointInTriangle(pt, shapeCoordinates.xy, shapeCoordinates.xy + vec2(0.0, shapeCoordinates.w), shapeCoordinates.xy + vec2(shapeCoordinates.z, 0.0), shapeCoordinates.xy + shapeCoordinates.zw / 2.0))\t{\n\t\t\treturnMe = 1.0;\n\t\t\t// soft edge if needed\n\t\t\tif ((pt.x > shapeCoordinates.x) && (pt.x < shapeCoordinates.x)) {\n\t\t\t\treturnMe = clamp(((pt.x - shapeCoordinates.x) / RENDERSIZE.x), 0.0, 1.0);\n\t\t\t\treturnMe = pow(returnMe, 0.5);\n\t\t\t}\n\t\t\telse if ((pt.x > shapeCoordinates.x + shapeCoordinates.z) && (pt.x < shapeCoordinates.x + shapeCoordinates.z)) {\n\t\t\t\treturnMe = clamp(((shapeCoordinates.x + shapeCoordinates.z - pt.x) / RENDERSIZE.x), 0.0, 1.0);\n\t\t\t\treturnMe = pow(returnMe, 0.5);\n\t\t\t}\n\t\t}\n\t\telse if (RotatedPointInTriangle(pt, shapeCoordinates.xy + shapeCoordinates.zw, shapeCoordinates.xy + vec2(0.0, shapeCoordinates.w), shapeCoordinates.xy + vec2(shapeCoordinates.z, 0.0), shapeCoordinates.xy + shapeCoordinates.zw / 2.0))\t{\n\t\t\treturnMe = 1.0;\n\t\t\t// soft edge if needed\n\t\t\tif ((pt.x > shapeCoordinates.x) && (pt.x < shapeCoordinates.x)) {\n\t\t\t\treturnMe = clamp(((pt.x - shapeCoordinates.x) / RENDERSIZE.x), 0.0, 1.0);\n\t\t\t\treturnMe = pow(returnMe, 0.5);\n\t\t\t}\n\t\t\telse if ((pt.x > shapeCoordinates.x + shapeCoordinates.z) && (pt.x < shapeCoordinates.x + shapeCoordinates.z)) {\n\t\t\t\treturnMe = clamp(((shapeCoordinates.x + shapeCoordinates.z - pt.x) / RENDERSIZE.x), 0.0, 1.0);\n\t\t\t\treturnMe = pow(returnMe, 0.5);\n\t\t\t}\n\t\t}\n\t}\n\t//\ttriangle\n\telse if (shape == 1)\t{\n\t\tif (RotatedPointInTriangle(pt, shapeCoordinates.xy, shapeCoordinates.xy + vec2(shapeCoordinates.z / 2.0, shapeCoordinates.w), shapeCoordinates.xy + vec2(shapeCoordinates.z, 0.0), shapeCoordinates.xy + shapeCoordinates.zw / 2.0))\t{\n\t\t\treturnMe = 1.0;\n\t\t}\n\t}\n\t//\toval\n\telse if (shape == 2)\t{\n\t\treturnMe = distance(pt, vec2(shapeCoordinates.xy + shapeCoordinates.zw / 2.0));\n\t\tif (returnMe < min(shapeCoordinates.z,shapeCoordinates.w) / 2.0)\t{\n\t\t\treturnMe = 1.0;\n\t\t}\n\t\telse\t{\n\t\t\treturnMe = 0.0;\n\t\t}\n\t}\n\t//\tdiamond\n\telse if (shape == 3)\t{\n\t\tif (RotatedPointInTriangle(pt, shapeCoordinates.xy + vec2(0.0, shapeCoordinates.w / 2.0), shapeCoordinates.xy + vec2(shapeCoordinates.z / 2.0, shapeCoordinates.w), shapeCoordinates.xy + vec2(shapeCoordinates.z, shapeCoordinates.w / 2.0), shapeCoordinates.xy + shapeCoordinates.zw / 2.0))\t{\n\t\t\treturnMe = 1.0;\n\t\t}\n\t\telse if (RotatedPointInTriangle(pt, shapeCoordinates.xy + vec2(0.0, shapeCoordinates.w / 2.0), shapeCoordinates.xy + vec2(shapeCoordinates.z / 2.0, 0.0), shapeCoordinates.xy + vec2(shapeCoordinates.z, shapeCoordinates.w / 2.0), shapeCoordinates.xy + shapeCoordinates.zw / 2.0))\t{\n\t\t\treturnMe = 1.0;\n\t\t}\n\t}\n\n\treturn returnMe;\t\n}\n\n\n\nvoid main() {\n\tvec4\t\tsrcPixel = color;\n\tvec2\t\tcenterPt = center * RENDERSIZE;\n\tvec2\t\ttmpVec = RENDERSIZE * vec2(shapeWidth,shapeHeight) / 2.0;\n\tvec4\t\tpatternRect = vec4(vec2(centerPt - tmpVec),tmpVec * 2.0);\n\tvec2\t\tthisPoint = RENDERSIZE * isf_FragNormCoord;\n\t\n\tif ((thisPoint.x >= patternRect.x) && (thisPoint.x <= patternRect.x + abs(patternRect.z)))\t{\n\t\tpatternRect.z = patternRect.z / float(horizontalRepeat);\n\t\tpatternRect.x = patternRect.x + abs(patternRect.z) * floor((thisPoint.x - patternRect.x) / abs(patternRect.z));\n\t}\n\telse\t{\n\t\tpatternRect.z = patternRect.z / float(horizontalRepeat);\t\n\t}\n\t\n\tif ((thisPoint.y >= patternRect.y) && (thisPoint.y <= patternRect.y + abs(patternRect.w)))\t{\n\t\tpatternRect.w = patternRect.w / float(verticalRepeat);\n\t\tpatternRect.y = patternRect.y + abs(patternRect.w) * floor((thisPoint.y - patternRect.y) / abs(patternRect.w));\n\t}\n\telse\t{\n\t\tpatternRect.w = patternRect.w / float(verticalRepeat);\t\n\t}\n\t\n\tfloat\t\tluminance = isPointInShape(thisPoint.xy, maskShapeMode, patternRect);\n\t\n\tif (invertMask)\n\t\tluminance = 1.0 - luminance;\n\t\n\tsrcPixel = color * luminance;\n\t\n\tgl_FragColor = srcPixel;\n}\n\n","Inlets":[{"uuid":"8f38638e-9f9f-48b0-ae36-1cba86ef5703","ObjectName":"Inlet","id":0,"Hidden":true,"Custom":"color","Exposed":"color","Value":{"Vec4f":[1.0,1.0,1.0,1.0]},"Domain":{}},{"uuid":"485680cc-b8b9-4a01-acc7-3e8334bdc016","ObjectName":"Inlet","id":1,"Hidden":true,"Custom":"maskShapeMode","Exposed":"maskshapemode","Value":{"Int":1},"Domain":{"Int":{"Values":[0,1,2,3]}},"Values":[["Rectangle",{"Int":0}],["Triangle",{"Int":1}],["Circle",{"Int":2}],["Diamond",{"Int":3}]]},{"uuid":"af2b4fc3-aecb-4c15-a5aa-1c573a239925","ObjectName":"Inlet","id":2,"Hidden":true,"Custom":"shapeWidth","Exposed":"shapewidth","Value":{"Float":0.5},"Domain":{"Float":{"Min":0.0,"Max":2.0}}},{"uuid":"af2b4fc3-aecb-4c15-a5aa-1c573a239925","ObjectName":"Inlet","id":3,"Hidden":true,"Custom":"shapeHeight","Exposed":"shapeheight","Value":{"Float":0.5},"Domain":{"Float":{"Min":0.0,"Max":2.0}}},{"uuid":"8093743c-584f-4bb9-97d4-6c7602f87116","ObjectName":"Inlet","id":4,"Hidden":true,"Custom":"center","Exposed":"center","Value":{"Vec2f":[0.5,0.5]},"Domain":{"Vec2f":{"Min":[0.0,0.0],"Max":[1.0,1.0],"Values":[[],[]]}}},{"uuid":"fb27e4cb-ea7f-41e2-ad92-2354498c1b6b","ObjectName":"Inlet","id":5,"Hidden":true,"Custom":"invertMask","Exposed":"invertmask","Value":{"Bool":false},"Domain":{"Bool":null}},{"uuid":"485680cc-b8b9-4a01-acc7-3e8334bdc016","ObjectName":"Inlet","id":6,"Hidden":true,"Custom":"horizontalRepeat","Exposed":"horizontalrepeat","Value":{"Int":1},"Domain":{"Int":{"Values":[1,2,3,4,5,6,7,8,9]}},"Values":[["1",{"Int":1}],["2",{"Int":2}],["3",{"Int":3}],["4",{"Int":4}],["5",{"Int":5}],["6",{"Int":6}],["7",{"Int":7}],["8",{"Int":8}],["9",{"Int":9}]]},{"uuid":"485680cc-b8b9-4a01-acc7-3e8334bdc016","ObjectName":"Inlet","id":7,"Hidden":true,"Custom":"verticalRepeat","Exposed":"verticalrepeat","Value":{"Int":1},"Domain":{"Int":{"Values":[1,2,3,4,5,6,7,8,9]}},"Values":[["1",{"Int":1}],["2",{"Int":2}],["3",{"Int":3}],["4",{"Int":4}],["5",{"Int":5}],["6",{"Int":6}],["7",{"Int":7}],["8",{"Int":8}],["9",{"Int":9}]]}],"Outlets":[{"uuid":"f1c71046-b754-49a5-8e66-d01374773dfc","ObjectName":"Outlet","id":0,"Hidden":false,"Address":"window:/"}]}],"SmallViewRack":[{"Processes":[2],"Process":null,"Height":50.0,"Nodal":true}],"FullViewRack":[{"Process":0,"Nodal":true}],"DefaultDuration":10584000000,"MinDuration":10584000000,"MaxDuration":11113200000,"GuiDuration":11642400000,"Speed":1.0,"Rigidity":false,"MinNull":false,"MaxInf":true,"Signatures":[[0,[4,4]]],"StartState":0,"EndState":1,"StartDate":0,"HeightPercentage":0.0,"NodalSlotHeight":100.0,"QuantizationRate":-1.0,"Zoom":15120000.0,"Center":0,"ViewMode":1,"SmallViewShown":true,"HasSignature":true},"StartTimeNode":{"ObjectName":"Scenario::TimeSyncModel","id":0,"Metadata":{"ScriptingName":"Sync.start","Comment":"","Color":"Gray","Label":"","Touched":true},"Date":0,"Events":[0],"MusicalSync":-1.0,"AutoTrigger":false,"Start":true,"Active":false,"Expression":" { true == false } "},"EndTimeNode":{"ObjectName":"Scenario::TimeSyncModel","id":1,"Metadata":{"ScriptingName":"Sync.end","Comment":"","Color":"Gray","Label":"","Touched":true},"Date":10584000000,"Events":[1],"MusicalSync":-1.0,"AutoTrigger":false,"Start":false,"Active":true,"Expression":" { true == false } "},"StartEvent":{"ObjectName":"Scenario::EventModel","id":0,"Metadata":{"ScriptingName":"Event.start","Comment":"","Color":"Emphasis4","Label":"","Touched":true},"TimeNode":0,"States":[0],"Condition":"","Date":0,"Offset":0},"EndEvent":{"ObjectName":"Scenario::EventModel","id":1,"Metadata":{"ScriptingName":"Event.end","Comment":"","Color":"Emphasis4","Label":"","Touched":true},"TimeNode":1,"States":[1],"Condition":"","Date":10584000000,"Offset":0},"StartState":{"ObjectName":"Scenario::StateModel","id":0,"Metadata":{"ScriptingName":"State.start","Comment":"","Color":"Base1","Label":"","Touched":true},"Event":0,"PreviousConstraint":null,"NextConstraint":0,"HeightPercentage":0.0,"Messages":{"Name":"","Accessors":[],"Unit":"none","Previous":[],"Following":[],"User":null,"Priorities":[1,2,0]},"Controls":[],"StateProcesses":[]},"EndState":{"ObjectName":"Scenario::StateModel","id":1,"Metadata":{"ScriptingName":"State.end","Comment":"","Color":"Base1","Label":"","Touched":true},"Event":1,"PreviousConstraint":0,"NextConstraint":null,"HeightPercentage":0.0,"Messages":{"Name":"","Accessors":[],"Unit":"none","Previous":[],"Following":[],"User":null,"Priorities":[1,2,0]},"Controls":[],"StateProcesses":[]}},"Speed":1.0,"Cables":[],"BusIntervals":[]},"Plugins":[{"uuid":"1f923578-08c3-49be-9ba9-69c144ee2e32","Refresh":false,"Reconnect":false,"MidiRatio":1.0},{"uuid":"6e610e1f-9de2-4c36-90dd-0ef570002a21","RootNode":{},"Children":[{"Device":{"Name":"window","Protocol":"5a181207-7d40-4ad8-814e-879fcdf8cc31"},"Children":[{"Address":{"ioType":"<->","ClipMode":"Free","RepetitionFilter":false,"Value":{"Int":0},"Domain":{"Int":{"Min":0,"Max":100}},"Name":"screen"}},{"Address":{"ioType":"<->","ClipMode":"Free","RepetitionFilter":false,"Value":{"Vec2f":[0.0,0.0]},"Domain":{},"Name":"position"}},{"Address":{"ClipMode":"Free","RepetitionFilter":false,"Value":{},"Domain":{},"Name":"cursor"},"Children":[{"Address":{"ioType":"<->","ClipMode":"Free","RepetitionFilter":false,"Value":{"Vec2f":[0.0,0.0]},"Domain":{"Float":{"Min":0.0,"Max":1.0}},"Name":"scaled"}},{"Address":{"ioType":"<->","ClipMode":"Free","RepetitionFilter":false,"Value":{"Vec2f":[0.0,0.0]},"Domain":{"Vec2f":{"Min":[0.0,0.0],"Max":[1280.0,270.0],"Values":[[],[]]}},"Name":"absolute"}}]},{"Address":{"ioType":"<->","ClipMode":"Free","RepetitionFilter":false,"Value":{"Vec2f":[1280.0,720.0]},"Domain":{},"Name":"size"}},{"Address":{"ClipMode":"Free","RepetitionFilter":false,"Value":{},"Domain":{},"Name":"key"},"Children":[{"Address":{"ioType":"<->","ClipMode":"Free","RepetitionFilter":false,"Value":{"Int":0},"Domain":{},"Name":"code"}},{"Address":{"ioType":"<->","ClipMode":"Free","RepetitionFilter":false,"Value":{"String":""},"Domain":{},"Name":"text"}}]},{"Address":{"ioType":"<->","ClipMode":"Free","RepetitionFilter":false,"Value":{"Bool":false},"Domain":{},"Name":"fullscreen"}}]}]}],"Version":4,"Commit":"22c7499e4342cdb2531356e3f38aa5fbd44a9471","Tag":"3.0.0"}